<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>List Folders</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        width: 100vw;
        height: 100vh;
      }

      .pageContainer {
        display: flex;
        width: 100vw;
        height: 100vh;
      }

      .buttonList {
        background-color: #a7a7a7;
        width: 30%;
        max-width: 300px;
        height: 100vh;
        overflow: auto;
        border-right: 2px solid rgb(107, 107, 107);
      }

      .button {
        display: block;
        border: none;
        background-color: rgb(236, 236, 236);
        color: black;
        padding: 16px 8px;
        width: 100%;
        outline: none;
        text-align: left;
        cursor: pointer;
        border-bottom: 1px dashed rgb(176, 176, 176);
        transition: 0.2s;
      }

      .button:hover {
        background-color: #bfbf64;
      }

      .button.active {
        background-color: #e4e432;
      }

      .iframeContainer {
        border: 0px solid black;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        flex-grow: 2;
      }

      iframe {
        border: 0px solid black;
        display: block;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div class="pageContainer">
      <div class="buttonList"></div>
      <div class="iframeContainer">
        <iframe id="projectIframe"></iframe>
      </div>
    </div>
    <script>
      async function start() {
        function handleButtonClick(btoEvt, buttonText) {
          // Remove active class from all buttons
          document
            .querySelectorAll(".button")
            .forEach((b) => b.classList.remove("active"));

          // Find button by text and add active class
          const pressedButton = btoEvt.currentTarget;
          pressedButton.classList.add("active");

          // Update iframe src
          const iframe = document.querySelector("#projectIframe");
          iframe.src = pressedButton.dataset.iframeSrc;
        }

        // Fetch project list
        const response = await fetch("./folders.json");
        const PROJECT_LIST = await response.json();

        // Populate button list
        const buttonList = document.querySelector(".buttonList");
        PROJECT_LIST.forEach((buttonItem, index) => {
          // Create button
          const button = document.createElement("button");
          button.textContent = buttonItem.tabButtonText;
          button.className = "button";
          button.dataset.iframeSrc = buttonItem.iframeSrc;
          button.addEventListener("click", (btoEvt) =>
            handleButtonClick(btoEvt, buttonItem.tabButtonText)
          );

          // Append the button to the container
          buttonList.appendChild(button);
        });

        // Find the button with defaultOpen and enable it
        document.getElementsByClassName("defaultOpen")[0]?.click();
      }
      start();
    </script>
  </body>
</html>
